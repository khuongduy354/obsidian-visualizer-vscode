<html lang="en">
  <head>
    <title>Obsidian Visualizer</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <div id="graph"></div>
    <script src="./neo4jd3.min.js"></script>
    <script src="./d3.min.js"></script>
    <script>
      if (acquireVsCodeApi === undefined) {
        var acquireVsCodeApi = () => {
          return {
            postMessage: (message) => {
              console.log(message);
            },
          };
        };
      }
      const vscode = acquireVsCodeApi();
      const data = {
        results: [
          {
            columns: ["File"],
            data: [
              {
                graph: {
                  nodes: [
                    {
                      id: "/markdowns/test copy 2.md",
                      labels: ["File"],
                      properties: {
                        fileUri: {
                          $mid: 1,
                          fsPath: "/markdowns/test copy 2.md",
                          external:
                            "vscode-test-web://mount/markdowns/test%20copy%202.md",
                          path: "/markdowns/test copy 2.md",
                          scheme: "vscode-test-web",
                          authority: "mount",
                        },
                      },
                    },
                    {
                      id: "/markdowns/test copy 3.md",
                      labels: ["File"],
                      properties: {
                        fileUri: {
                          $mid: 1,
                          fsPath: "/markdowns/test copy 3.md",
                          external:
                            "vscode-test-web:/markdowns/test%20copy%203.md",
                          path: "/markdowns/test copy 3.md",
                          scheme: "vscode-test-web",
                        },
                      },
                    },
                  ],
                  relationships: [
                    {
                      id: "/markdowns/test copy 2.md/markdowns/test copy 3.md",
                      type: "LINKS_TO",
                      startNode: "/markdowns/test copy 2.md",
                      endNode: "/markdowns/test copy 3.md",
                      properties: {},
                    },
                  ],
                },
              },
            ],
          },
        ],
      };
      var neo4jd3 = new Neo4jd3("#graph", {
        highlight: [
          {
            class: "File",
          },
        ],
        minCollision: 100,
        neo4jData: data,
        nodeRadius: 25,
        onNodeDoubleClick: function (node) {
          console.log(node);
          vscode.postMessage({
            command: "onNodeDoubleClick",
            node,
          });
        },
        // onNodeMouseEnter: function (node) {
        //   console.log("Mouse Enter: ", node);
        // },
        infoPanel: false,
        // zoomFit: true,
      });

      // neo4jd3.updateWithD3Data(data);
    </script>
  </body>
</html>
